# 每日新闻插件

## 脚本作用

本脚本是一个微信自动化每日新闻推送插件，主要功能包括：
- **立即推送**：手动获取并发送每日新闻到指定聊天
- **定时推送**：自动在设定时间向群组发送每日新闻
- **群组管理**：支持白名单/黑名单模式管理目标群组

## 使用方法

### 1. 立即获取新闻
- 发送 `/每日新闻`：插件将立即获取新闻并发送到当前聊天

### 2. 定时发送管理
- **设置发送时间**：`/每日新闻 设置定时时间 HH:mm`
  - 例如：`/每日新闻 设置定时时间 08:00`（每天早上8点）
  - 例如：`/每日新闻 设置定时时间 20:30`（晚上8点半）

- **启用定时功能**：`/每日新闻 启用定时发送`
- **禁用定时功能**：`/每日新闻 禁用定时发送`
- **查看当前设置**：`/每日新闻 查看定时时间`

### 3. 群组管理
- **添加当前群**：`/每日新闻 添加当前群`
- **删除当前群**：`/每日新闻 删除当前群`
- **添加指定群**：`/每日新闻 添加群 [群ID]`
- **删除指定群**：`/每日新闻 删除群 [群ID]`
- **查看群列表**：`/每日新闻 查看群列表`
- **清空群列表**：`/每日新闻 清空群列表`
- **设置群模式**：`/每日新闻 设置群模式 whitelist|blacklist`
- **白名单模式**：只向列表中的群组发送新闻
- **黑名单模式**：不向列表中的群组发送新闻
- 支持快速添加/移除当前群组

## 使用示例

### 基础使用流程
1. 在目标群聊中发送：`/每日新闻 添加当前群`
2. 设置发送时间：`/每日新闻 设置定时时间 08:00`
3. 启用定时：`/每日新闻 启用定时发送`

### 高级配置
```
# 设置白名单模式（推荐）
/每日新闻 设置群模式 whitelist

# 添加多个群组
/每日新闻 添加当前群  # 在第一个群中执行
/每日新闻 添加当前群  # 在第二个群中执行

# 设置定时发送
/每日新闻 设置定时时间 09:00
/每日新闻 启用定时发送
```

## 注意事项

1. **权限要求**：插件需要文件读写权限用于缓存和日志
2. **网络依赖**：需要网络连接来获取新闻内容
3. **微信限制**：需确保微信后台运行不被系统清理
4. **时间格式**：必须使用24小时制时间格式
5. **群组识别**：群聊ID以 `@chatroom` 结尾

## 故障排除

- **定时不生效**：检查微信是否在后台运行，定时功能是否已启用
- **发送失败**：检查网络连接，查看日志文件获取详细错误信息
- **图片无法显示**：可能是网络问题，插件会自动降级为文本发送
---

**提示**：首次使用建议先测试手动发送功能，确认正常后再配置定时发送。